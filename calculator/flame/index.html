
<!-- saved from url=(0035)https://photonrain.github.io/flame/ -->
<html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><script src="./photonrain.github.io_files/hm.js.下载"></script><script src="./photonrain.github.io_files/hm(1).js.下载"></script><script src="./photonrain.github.io_files/hm.js(1).下载"></script><script>
var _hmt = _hmt || [];
(function() {
  var hm = document.createElement("script");
  hm.src = "https://hm.baidu.com/hm.js?b52ffcdf33a045f844b6558bb382a915";
  var s = document.getElementsByTagName("script")[0]; 
  s.parentNode.insertBefore(hm, s);
})();
</script>
   <script src="https://unpkg.com/xlsx/dist/xlsx.full.min.js"></script>
<script src="./photonrain.github.io_files/jquery-3.4.1.slim.js.下载"></script>
<script src="./photonrain.github.io_files/popper.js.下载"></script>
<script src="./photonrain.github.io_files/bootstrap.js.下载"></script>
<script src="./photonrain.github.io_files/updateOptions.js.下载"></script>
<link rel="stylesheet" href="./photonrain.github.io_files/bootstrap.css">
<link rel="stylesheet" href="./photonrain.github.io_files/font-awesome.css">
<link rel="stylesheet" href="./photonrain.github.io_files/style.css">

    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">


</head><body onload="toggleLabel()">
    <div class="container-fluid head">
        <h1><span>简易火花等级计算器<br></span> </h1>
    <!-- <h1><span>class="container-fluid head"</span> </h1> -->
    </div>
  <a href="https://photonrain.github.io/" title="回到主页">首页</a>
<form>
</form>
输入火花属性即可计算<a href="https://www.bilibili.com/video/BV17N4y1Z71E/" title="教学">教学视频</a>
  <br>
如果遇到计算问题可以刷新(F5)，无法解决的话，请点击下方链接私信我，感谢您的支持。
  <br>   
火花评分系统暂时仅适用于140，150，160，200, 250等级的BOSS防具饰品

<style>textarea{resize: none;}</style>&gt;




   <!--  <style>  
        img{
            display: none;
        }
        button:hover+img {
            display: block;
        }
 
    </style> -->

<!-- 只读模式 -->
<form class="container maincon">

<input type="radio" name="itemtype" id="itemtype" value="0" checked="checked" ,="" onclick="toggleLabel()">武器
<input type="radio" name="itemtype" value="1" ,="" onclick="toggleLabel()">防具/饰品
<input type="checkbox" name="isboss" value="1" id="isboss" onclick="flamenum()" checked="checked">是否为BOSS装备
<input type="checkbox" name="ishighflame" value="1" id="ishighflame" onclick="flamenum()" >是否为高级火花（4-7级评分，仅适用于防具）
<br>


<script>
function toggleLabel() {
  var type = document.getElementsByName("itemtype");
  var weapon = document.getElementById("weaponstate");
  var armo = document.getElementById("armorstate");
  if(type[0].checked == true){
        weapon.style.display = "block";
        armo.style.display = "none";
    }else{
        weapon.style.display = "none";
        armo.style.display = "block";

    }
    console.log(type[0].checked)
}
</script>

<script>
function flamenum() {
  var type = document.getElementsByName("isboss");
  var weapon = document.getElementById("flamenum");
  if(type[0].checked == false){
        weapon.style.display = "block";
    }else{
        weapon.style.display = "none";

    }
    console.log(type[0].checked)
}
</script>



    <!-- <div>
        <label>
         攻击力=？属性：
            <input type="STR" class="form-control text-align-left" id="att_state" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
        <label>
           1%全属性=？属性：
            <input type="STR" class="form-control text-align-left" id="all_state" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
        <label>
           魔力=？属性：
            <input type="STR" class="form-control text-align-left" id="all_state" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
        <label>
           主属性是哪个
            <input type="STR" class="form-control text-align-left" id="all_state" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
    </div> -->

      

<p>输入后按tab以切换至下一输入框</p>

  <div id="flamenum" style="display: none;">
        <label>
            猜测火花条数：
            <input type="FNUM" class="form-control text-align-left" id="FNUM" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
</div>


    <div class="form-row" id="weaponstate" style="display: none;">
        <div>
        <label>
            装备等级：
            <input type="STR" class="form-control text-align-left" id="LEVEL1" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>

    </div>
    <div>
        <label>
           基础攻击力/魔法力：
            <input type="STR" class="form-control text-align-left" id="BASEATT" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
        
    </div>
    <div>
        <label>
            力量：
            <input type="STR" class="form-control text-align-left" id="STR1" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
    </div>

    <div>
        <label>
            敏捷：
            <input type="DEX" class="form-control text-align-left" id="DEX1" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            智力：
            <input type="INT" class="form-control text-align-left" id="INT1" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            运气：
            <input type="LUK" class="form-control text-align-left" id="LUK1" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            最大血量：
            <input type="HP" class="form-control text-align-left" id="HP1" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            最大蓝量：
            <input type="MP" class="form-control text-align-left" id="MP1" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            装备需求等级降低：
            <input type="LEVEL" class="form-control text-align-left" id="LEVELDEC1" value="0">
        </label>
    </div>
    <div>
        <label>
            防御力：
            <input type="DEF" class="form-control text-align-left" id="DEF1" value="0">
        </label>
    </div>
    <div>
        <label>
            攻击力：
            <input type="ATT" class="form-control text-align-left" id="ATT1" value="0">
        </label>
    </div>
    <div>
        <label>
            魔法攻击力：
            <input type="MT" class="form-control text-align-left" id="MT1" value="0">
        </label>
    </div>
    <div>
        <label>
            BOSS伤害：
            <input type="BD" class="form-control text-align-left" id="BD" value="0">
        </label>
    </div>
    <div>
        <label>
            伤害：
            <input type="DAM" class="form-control text-align-left" id="DAM" value="0">
        </label>
    </div>
    <div>
        <label>
            全属性：
            <input type="AS" class="form-control text-align-left" id="AS1" value="0">
        </label>
    </div>
</div>

<div class="form-row" id="armorstate" style="display: block;">
    主属性是哪个
  <select id="attributes">
  <option value="STR">力量</option>
  <option value="DEX">敏捷</option>
  <option value="INT">智力</option>
  <option value="LUK">运气</option>
</select>
    <div>
        <label>
            装备等级：
            <input type="STR" class="form-control text-align-left" id="LEVEL" onkeypress="if(event.keyCode==13) focusNextInput(this) ;" value="0">
        </label>
    </div>
    <div>
        <label>
            力量：
            <input type="STR" class="form-control text-align-left" id="STR" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>

    <div>
        <label>
            敏捷：
            <input type="DEX" class="form-control text-align-left" id="DEX" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            智力：
            <input type="INT" class="form-control text-align-left" id="INT" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            运气：
            <input type="LUK" class="form-control text-align-left" id="LUK" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            最大血量：
            <input type="HP" class="form-control text-align-left" id="HP" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            最大蓝量：
            <input type="MP" class="form-control text-align-left" id="MP" onkeypress="if(event.keyCode==13) focusNextInput(this);" value="0">
        </label>
    </div>
    <div>
        <label>
            装备需求等级降低：
            <input type="LEVEL" class="form-control text-align-left" id="LEVELDEC" value="0">
        </label>
    </div>
    <div>
        <label>
            防御力：
            <input type="DEF" class="form-control text-align-left" id="DEF" value="0">
        </label>
    </div>
    <div>
        <label>
            攻击力：
            <input type="ATT" class="form-control text-align-left" id="ATT" value="0">
        </label>
    </div>
    <div>
        <label>
            魔法攻击力：
            <input type="MT" class="form-control text-align-left" id="MT" value="0">
        </label>
    </div>
    <div>
        <label>
            全属性：
            <input type="AS" class="form-control text-align-left" id="AS" value="0">
        </label>
    </div>
    <div>
        <label>
            移动速度：
            <input type="MOVE" class="form-control text-align-left" id="MOVE" value="0">
        </label>
    </div>
    <div>
        <label>
            跳跃力：
            <input type="JUMP" class="form-control text-align-left" id="JUMP" value="0">
        </label>
    </div>
</div>



<button type="button" onclick="contxt(); readExcelFile();">计算</button>
  
<br>    
<br>

<textarea id="txt1" rows="8" readonly="”readonly”" cols="50"> </textarea>

<br>
<a href="https://space.bilibili.com/44579584?spm_id_from=333.1007.0.0" target="_blank" title="转到B站主页">BUG请联系：紫电NS</a>
<br>
<a href="https://wiki.biligame.com/maplestory/%E9%A6%96%E9%A1%B5" target="_blank" title="转到Bwiki主页">特别鸣谢Bwiki数据支持</a>
<br>



<a href="https://wiki.biligame.com/maplestory/%E8%A3%85%E5%A4%87%E5%BC%BA%E5%8C%96" target="_blank" title="转到Bwiki主页">


  
<script>
  var Score_input =0;
  var score=[];
  
     function  contxt() //定义函数
      { var maxtier = 7;
        var output = "" ; 
        var totalvalue = new Array() ;
        var Llevel = document.getElementById("LEVEL");
        var STR = document.getElementById("STR");
        var DEX = document.getElementById("DEX");
        var INT = document.getElementById("INT");
        var LUK = document.getElementById("LUK");
        var HP = document.getElementById("HP");
        var MP = document.getElementById("MP");
        var LEVEL = document.getElementById("LEVELDEC");
        var DEF = document.getElementById("DEF");
        var ATT = document.getElementById("ATT");
        var MT = document.getElementById("MT");
        var ALLSTATE = document.getElementById("AS");
        var MOVE = document.getElementById("MOVE");
        var JUMP = document.getElementById("JUMP");
        var BOSSDAMAGE = document.getElementById("BD");
        var DAMAGE = document.getElementById("DAM");
        var BASEATT = document.getElementById("BASEATT");

        var Llevel1 = document.getElementById("LEVEL1");
        var STR1 = document.getElementById("STR1");
        var DEX1 = document.getElementById("DEX1");
        var INT1 = document.getElementById("INT1");
        var LUK1 = document.getElementById("LUK1");
        var HP1 = document.getElementById("HP1");
        var MP1 = document.getElementById("MP1");
        var LEVEL1 = document.getElementById("LEVELDEC1");
        var DEF1 = document.getElementById("DEF1");
        var ATT1 = document.getElementById("ATT1");
        var MT1 = document.getElementById("MT1");
        var ALLSTATE1 = document.getElementById("AS1");
      //    var ATT_STATE = document.getElementById("att_state");
      //    var ALL_STATE = document.getElementById("all_state");

      //    ATT_STATE= parseFloat(ATT_STATE.value);
      //    ALL_STATE= parseFloat(ALL_STATE.value);
        HP = parseFloat(HP.value)+parseFloat(HP1.value);
        MP = parseFloat(HP.value)+parseFloat(HP1.value);
        STR = parseFloat(STR.value)+parseFloat(STR1.value);
        DEX = parseFloat(DEX.value)+parseFloat(DEX1.value);
        INT = parseFloat(INT.value)+parseFloat(INT1.value);
        LUK = parseFloat(LUK.value)+parseFloat(LUK1.value);
        maxHP = parseFloat(HP.value)+parseFloat(HP1.value);
        maxMP = parseFloat(MP.value)+parseFloat(MP.value);
        LEVEL = parseFloat(LEVEL.value)+parseFloat(LEVEL1.value);
        DEF = parseFloat(DEF.value)+parseFloat(DEF1.value);
        ATT = parseFloat(ATT.value)+parseFloat(ATT1.value);
        MT = parseFloat(MT.value)+parseFloat(MT1.value);
        ALLSTATE = parseFloat(ALLSTATE.value) + parseFloat(ALLSTATE1.value);
        MOVE = parseFloat(MOVE.value);
        JUMP = parseFloat(JUMP.value);
        BOSSDAMAGE = parseFloat(BOSSDAMAGE.value);
        DAMAGE = parseFloat(DAMAGE.value);
        Lleve = parseFloat(Llevel.value)+parseFloat(Llevel1.value);
        BASEATT = parseFloat(BASEATT.value);
        
        mainstate = document.getElementById("attributes");
        if(mainstate.value=='STR'){
            Score_input = Score_input+STR+ATT*5+ALLSTATE*9;
        }
        if(mainstate.value=='DEX'){
            Score_input = Score_input+DEX+ATT*5+ALLSTATE*9;
        }
        if(mainstate.value=='INT'){
            Score_input = Score_input+INT+MT*5+ALLSTATE*9;
        }
        if(mainstate.value=='LUK'){
            Score_input = Score_input+LUK+ATT*5+ALLSTATE*9;
        }
        
       console.log(Score_input)
        

        var onestate = new Array();//主属性
        for(var i =0; i<12;i++){//装备等级区间
            onestate[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                onestate[i][j] = (i+1)*(j+1);
            }           
        }
        //console.log(onestate)
        var doublestate = new Array();//双属性
        for(var i =0; i<7;i++){//装备等级区间
            doublestate[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                doublestate[i][j] = (i+1)*(j+1);
            }           
        }


        var maxHP = new Array();
        for(var i =0; i<26;i++){//装备等级区间
            maxHP[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                if(i==1){
                    maxHP[i][j] = (i+1)*(j+1)*3;
                }else{
                    maxHP[i][j] = (i)*(j+1)*30;
                }
                
            }           
        }
        var maxMP = new Array();
        for(var i =0; i<26;i++){//装备等级区间
            maxMP[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                if(i==1){
                    maxMP[i][j] = (i+1)*(j+1)*3;
                }else{
                    maxMP[i][j] = (i)*(j+1)*30;
                }
                
            }           
        }

        var level = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            level[i] = 5*(i+1);         
        }

        var def = new Array();
        for(var i =0; i<12;i++){//装备等级区间
            def[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                def[i][j] = (i+1)*(j+1);                
            }           
        }
        

        var att_armor = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            att_armor[i] = i+1;         
        }

        var mt_armor = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            mt_armor[i] = i+1;          
        }

        var att_weapon_boss = new Array();
        for(var i =0; i<6;i++){//装备等级区间
            att_weapon_boss[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                if(i==0){
                    att_weapon_boss[i][0] = 0.01000;    
                    att_weapon_boss[i][1] = 0.02000;    
                    att_weapon_boss[i][2] = 0.03000;
                    att_weapon_boss[i][3] = 0.04400;
                    att_weapon_boss[i][4] = 0.06050;
                    att_weapon_boss[i][5] = 0.07986;
                    att_weapon_boss[i][6] = 0.102487;
                }else{
                    att_weapon_boss[i][j] = toPrecision(att_weapon_boss[0][j]*(i+1),8);
                }
                        
            }           
        }


        var mt_weapon_boss = new Array();
        for(var i =0; i<6;i++){//装备等级区间
            mt_weapon_boss[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                if(i==0){
                    mt_weapon_boss[i][0] = 0.01000; 
                    mt_weapon_boss[i][1] = 0.02000; 
                    mt_weapon_boss[i][2] = 0.03000;
                    mt_weapon_boss[i][3] = 0.0440;
                    mt_weapon_boss[i][4] = 0.06050;
                    mt_weapon_boss[i][5] = 0.07986;
                    mt_weapon_boss[i][6] = 0.102487;
                }else{
                    mt_weapon_boss[i][j] = toPrecision(mt_weapon_boss[0][j]*(i+1),8);
                }
                        
            }           
        }

        var att_weapon_nboss = new Array();
        for(var i =0; i<6;i++){//装备等级区间
            att_weapon_nboss[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                if(i==0){
                    att_weapon_nboss[i][0] = 0.0102389;   
                    att_weapon_nboss[i][1] = 0.0227531285551763367463;   
                    att_weapon_nboss[i][2] = 0.0369738339;
                    att_weapon_nboss[i][3] = 0.054;
                    att_weapon_nboss[i][4] = 0.074516;
                    att_weapon_nboss[i][5] = 0.087846;
                    att_weapon_nboss[i][6] = 0.102487;
                }else{
                    att_weapon_nboss[i][j] = toPrecision(att_weapon_nboss[0][j]*(i+1),8);
                }
                        
            }           
        }

        var mt_weapon_nboss = new Array();
        for(var i =0; i<6;i++){//装备等级区间
            mt_weapon_nboss[i] = new Array(i);
            for(var j = 0; j < maxtier ;j++){//倍率
                if(i==0){
                    mt_weapon_nboss[i][0] = 0.0102389;    
                    mt_weapon_nboss[i][1] = 0.0227531285551763367463;   
                    mt_weapon_nboss[i][2] = 0.0369738339;
                    mt_weapon_nboss[i][3] = 0.054;
                    mt_weapon_nboss[i][4] = 0.074516;
                    mt_weapon_nboss[i][5] = 0.087846;
                    mt_weapon_nboss[i][6] = 0.102487;
                }else{
                    mt_weapon_nboss[i][j] = toPrecision(mt_weapon_nboss[0][j]*(i+1),8);
                }
                        
            }           
        }

        var bossdamage = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            bossdamage[i] = 2*(i+1);            
        }
        var damage = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            damage[i] = i+1;            
        }
        var allstate = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            allstate[i] = i+1;          
        }
        var jump = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            jump[i] = i+1;          
        }
        var movement = new Array();
        for(var i =0; i<maxtier;i++){//装备等级区间
            movement[i] = i+1;          
        }


        var flamename=[];
        var term=0;
        var STRguess=new Array();//这里把可能的值都放进来，有两个一维数组，分别是主属性和副属性
        var STRcounters =0;
        var DEXguess=new Array();
        var DEXcounters =0;
        var INTguess=new Array();
        var INTcounters =0;
        var LUKguess=new Array();
        var LUKcounters =0;


        var equiptype = document.getElementById("itemtype");//如果为真，则表明现在是武器
        var isboss = document.getElementById("isboss");//如果为真，则表明现在是boss装备
        var ishighflame = document.getElementById("ishighflame");//如果为真，则表明现在是高等级评分
        equiptype = equiptype.checked;
        isboss  = isboss.checked;
        ishighflame = ishighflame.checked;
        console.log('pre')
        console.log(ishighflame)
                        var correct = 0;//判断属性计算是否正确
        if(equiptype == true){
            if(isboss == true){//BOSS武器
                
                if(HP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            if (HP == maxHP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级血量火花";
                            console.log(flamename[term])
                            term++;
                            break
                        }
                        }
                        //console.log(HP)


                    
                }
                if(MP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            if (MP == maxMP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级魔量火花";
                            term++;
                            break
                        }
                        }
                }
                if(ATT!=0){
                    var levelscale;
                    for(var i =0; i<6;i++){//装备等级区间
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                            break;
                        }
                            
                    }
                    for(var j = 0; j < maxtier ;j++){
                            if (ATT == Math.ceil(BASEATT*att_weapon_boss[levelscale][j])) {

                            
                            flamename[term] = (j+1)+"级攻击火花";
                            term++;
                            break
                        }
                        }
            
                    
                }

                if(MT!=0){
                    var levelscale;
                    for(var i =0; i<6;i++){//装备等级区间
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                            break
                        }
                            
                    }
                    for(var j = 0; j < maxtier ;j++){
                            if (MT == Math.ceil(BASEATT*mt_weapon_boss[levelscale][j])) {
                            
                            flamename[term] = (j+1)+"级魔力火花";
                            term++;
                            break
                        }
                        }
                    
                }
                if(LEVEL!=0){
                    for(var i =0; i<maxtier;i++){//装备等级区间
                        if (LEVEL == level[i]) {
                        
                            flamename[term] = (i+1)+"级等级降低火花";
                            term++;
                            break
                        }       
                    }
                    
                }

                if(DEF!=0){
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                            if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }
                    for(var j = 0; j < maxtier ;j++){
                            if (DEF == def[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级防御力火花";
                            term++;
                            break
                        }
                        }
                    
                }
                if(BOSSDAMAGE!=0){
                    for(var i =0; i<maxtier;i++){//装备等级区间
                        if (BOSSDAMAGE == bossdamage[i]) {
                            
                            flamename[term] = (i+1)+"级BOSS伤害火花";
                            term++;
                            break
                        }       
                    }
                }
                if(DAMAGE!=0){
                    for(var i =0; i<maxtier;i++){//装备等级区间
                        if (DAMAGE == damage[i]) {
                            
                            flamename[term] = (i+1)+"级伤害火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(ALLSTATE!=0){
                    for(var i =0; i<maxtier;i++){//装备等级区间
                        if (ALLSTATE == allstate[i]) {
                            
                            flamename[term] = (i+1)+"级全属性火花";
                            term++;
                            break
                        }       
                    }
                    
                }

                var remainder = 4-term;

                if(remainder==-1){//没有属性

                }else{//开始最难的部分
                        if(1){      
                    STRguess[STRcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            STRguess[STRcounters][j] = onestate[levelscale][j] ;
                        }           

                        STRcounters++;
                        STRguess[STRcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                        
                            STRguess[STRcounters][j] = doublestate[levelscale][j] ;
                        }       


                }

                if(1){
                    DEXguess[DEXcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = onestate[levelscale][j] ;
                        }           

                        DEXcounters++;
                        DEXguess[DEXcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            DEXguess[DEXcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                if(1){
                    LUKguess[LUKcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            LUKguess[LUKcounters][j] = onestate[levelscale][j] ;
                        }           

                        LUKcounters++;
                        LUKguess[LUKcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            LUKguess[LUKcounters][j] = doublestate[levelscale][j] ;
                        }
                }
                if(1){
                    INTguess[INTcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            INTguess[INTcounters][j] = onestate[levelscale][j] ;
                        }           

                        INTcounters++;
                        INTguess[INTcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < maxtier ;j++){
                            INTguess[INTcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                }

                var calulation = new Array();
                var calulationname = new Array();

                var loop=0;
                calulation[loop]=[0,0,0,0];
                calulationname[loop] = " ";
                var stateline= new Array();//可能的条目

//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                for (var i = 0; i <10; i++) {
                    stateline[i]=new Array();
                }


                for(var j = 0; j <maxtier; j++){
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }


                if(STR==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = 0;
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = 0;
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(DEX==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = 0;
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = 0;
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(INT==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = 0;
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = 0;
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = 0;
                }

                }
                if(LUK==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = 0;
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = 0;
                    stateline[9][j] = 0;
                }

                }
                
                
                
                
                
                switch(remainder){
                case 0:
                    break;
                case 1://取一个
                    for(var j=0;j<10;j++){


                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        whichline(calulation,calulationname,stateline,loop,i,j)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                }
                    break;
                case 2://取两个
                   
                    for(var j=0;j<10;j++){
                    for(var k=j+1;k<10;k++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                    }
                }
            }
                    break;
                case 3:
                     for(var j=0;j<10;j++){

                    for(var k=j+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}
                    }
                }
            }
        }
                    break;
                case 4:
                  

                

                for(var j=0;j<10;j++){
                for(var m=j+1;m<10;m++){
                    for(var k=m+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                for(var iiii=0;iiii<maxtier;iiii++){
                                    if(stateline[m][iiii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        whichline(calulation,calulationname,stateline,loop,iiii,m)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}}
                    }
                }
            }
        }
    }
                    break;
                }

                

                
                
            


            console.log(remainder)
                    
    for (var i = calulation.length - 1; i >= 0; i--) {

                        if (STR==calulation[i][0]&&DEX==calulation[i][1] &&INT==calulation[i][2] &&LUK==calulation[i][3]) {
                            console.log(calulationname[i])
                            console.log(calulation[i])
                            output =  output + calulationname[i]+"\n"
                        }
     
    }               
    





//console.log(calulationname)
        console.log(flamename)



            }else{//普通武器
                
                if(HP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            if (HP == maxHP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级血量火花";
                            term++;
                            break
                        }
                        }

                    
                }
                if(MP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            if (MP == maxMP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级魔量火花";
                            term++;
                            break
                        }
                        }
                }
                if(ATT!=0){
                    var levelscale;
                    for(var i =0; i<6;i++){//装备等级区间
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                            break;
                        }
                            
                    }
                    for(var j = 0; j < maxtier ;j++){
                            if (ATT == Math.ceil(BASEATT*att_weapon_nboss[levelscale][j])) {

                            
                            flamename[term] = (j+1)+"级攻击火花";
                            term++;
                            break
                        }
                        }
                    
                }

                if(MT!=0){
                    var levelscale;
                    for(var i =0; i<6;i++){//装备等级区间
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                            break
                        }
                            
                    }
                    for(var j = 0; j < maxtier ;j++){
                            if (MT == Math.ceil(BASEATT*mt_weapon_nboss[levelscale][j])) {
                            
                            flamename[term] = (j+1)+"级魔力火花";
                            term++;
                            break
                        }
                        }
                    
                }
                if(LEVEL!=0){
                    for(var i =0; i<maxtier;i++){//装备等级区间
                        if (LEVEL == level[i]) {
                        
                            flamename[term] = (i+1)+"级等级降低火花";
                            term++;
                            break
                        }       
                    }
                    
                }

                if(DEF!=0){
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                            if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }
                    for(var j = 0; j < 7 ;j++){
                            if (DEF == def[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级防御力火花";
                            term++;
                            break
                        }
                        }
                    
                }
                if(BOSSDAMAGE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (BOSSDAMAGE == bossdamage[i]) {
                            
                            flamename[term] = (i+1)+"级BOSS伤害火花";
                            term++;
                            break
                        }       
                    }
                }
                if(DAMAGE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (DAMAGE == damage[i]) {
                            
                            flamename[term] = (i+1)+"级伤害火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(ALLSTATE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (ALLSTATE == allstate[i]) {
                            
                            flamename[term] = (i+1)+"级全属性火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                var MAXFLAME = document.getElementById("FNUM");
                maxflame = parseFloat(MAXFLAME.value);
                var remainder = maxflame-term;

                if(remainder==-1){//没有属性

                }else{//开始最难的部分
                        if(1){      
                    STRguess[STRcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            STRguess[STRcounters][j] = onestate[levelscale][j] ;
                        }           

                        STRcounters++;
                        STRguess[STRcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                        
                            STRguess[STRcounters][j] = doublestate[levelscale][j] ;
                        }       


                }

                if(1){
                    DEXguess[DEXcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = onestate[levelscale][j] ;
                        }           

                        DEXcounters++;
                        DEXguess[DEXcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                if(1){
                    LUKguess[LUKcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            LUKguess[LUKcounters][j] = onestate[levelscale][j] ;
                        }           

                        LUKcounters++;
                        LUKguess[LUKcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            LUKguess[LUKcounters][j] = doublestate[levelscale][j] ;
                        }
                }
                if(1){
                    INTguess[INTcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            INTguess[INTcounters][j] = onestate[levelscale][j] ;
                        }           

                        INTcounters++;
                        INTguess[INTcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            INTguess[INTcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                }

                var calulation = new Array();
                var calulationname = new Array();

                var loop=0;
                calulation[loop]=[0,0,0,0];
                calulationname[loop] = " ";
                var stateline= new Array();//可能的条目

//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                for (var i = 0; i <10; i++) {
                    stateline[i]=new Array();
                }

                for(var j = 0; j <maxtier; j++){
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }


                if(STR==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = 0;
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = 0;
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(DEX==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = 0;
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = 0;
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(INT==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = 0;
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = 0;
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = 0;
                }

                }
                if(LUK==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = 0;
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = 0;
                    stateline[9][j] = 0;
                }

                }
                
                
                
                
                
                switch(remainder){
                case 0:
                    break;
                case 1://取一个
                    for(var j=0;j<10;j++){


                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        whichline(calulation,calulationname,stateline,loop,i,j)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                }
                    break;
                case 2://取两个
                   
                    for(var j=0;j<10;j++){
                    for(var k=j+1;k<10;k++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                    }
                }
            }
                    break;
                case 3:
                     for(var j=0;j<10;j++){

                    for(var k=j+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}
                    }
                }
            }
        }
                    break;
                case 4:
                  

                

                for(var j=0;j<10;j++){
                for(var m=j+1;m<10;m++){
                    for(var k=m+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                for(var iiii=0;iiii<maxtier;iiii++){
                                    if(stateline[m][iiii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        whichline(calulation,calulationname,stateline,loop,iiii,m)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}}
                    }
                }
            }
        }
    }
                    break;
                }

                

                
                
            


            console.log(remainder)
                    
    for (var i = calulation.length - 1; i >= 0; i--) {

                        if (STR==calulation[i][0]&&DEX==calulation[i][1] &&INT==calulation[i][2] &&LUK==calulation[i][3]) {
                            console.log(calulationname[i])
                            console.log(calulation[i])
                            output =  output + calulationname[i]+"\n"
                        }
     
    }   




            }
        }else{
            if(isboss == true){//BOSS防具
                
                if(HP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            if (HP == maxHP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级血量火花";
                            term++;
                            break
                        }
                        }

                    
                }
                if(MP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            if (MP == maxMP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级魔量火花";
                            term++;
                            break
                        }
                        }
                }
                if(ATT!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (ATT == att_armor[i]) {
                            
                            flamename[term] = (i+1)+"级攻击力火花";
                            term++;
                            break
                        }       
                    }

                    
                }

                if(MT!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (MT == mt_armor[i]) {
                            
                            flamename[term] = (i+1)+"级魔力火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(LEVEL!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (LEVEL == level[i]) {
                        
                            flamename[term] = (i+1)+"级等级降低火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(MOVE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (MOVE == movement[i]) {
                            flamename[term] = (i+1)+"级移动速度火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(JUMP!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (JUMP == jump[i]) {
                        
                            flamename[term] = (i+1)+"级跳跃力火花";
                            term++;
                            break
                        }       
                    }
                    
                }

                if(DEF!=0){
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                            if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }
                    for(var j = 0; j < 7 ;j++){
                            if (DEF == def[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级防御力火花";
                            term++;
                            break
                        }
                        }
                    
                }
                if(BOSSDAMAGE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (BOSSDAMAGE == bossdamage[i]) {
                            
                            flamename[term] = (i+1)+"级BOSS伤害火花";
                            term++;
                            break
                        }       
                    }
                }
                if(DAMAGE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (DAMAGE == damage[i]) {
                            
                            flamename[term] = (i+1)+"级伤害火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(ALLSTATE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (ALLSTATE == allstate[i]) {
                            
                            flamename[term] = (i+1)+"级全属性火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                var remainder = 4-term;

                if(remainder==-1){//没有属性

                }else{//开始最难的部分
                        if(1){      
                    STRguess[STRcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            STRguess[STRcounters][j] = onestate[levelscale][j] ;
                        }           

                        STRcounters++;
                        STRguess[STRcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                        
                            STRguess[STRcounters][j] = doublestate[levelscale][j] ;
                        }       


                }

                if(1){
                    DEXguess[DEXcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = onestate[levelscale][j] ;
                        }           

                        DEXcounters++;
                        DEXguess[DEXcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                if(1){
                    LUKguess[LUKcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            LUKguess[LUKcounters][j] = onestate[levelscale][j] ;
                        }           

                        LUKcounters++;
                        LUKguess[LUKcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            LUKguess[LUKcounters][j] = doublestate[levelscale][j] ;
                        }
                }
                if(1){
                    INTguess[INTcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            INTguess[INTcounters][j] = onestate[levelscale][j] ;
                        }           

                        INTcounters++;
                        INTguess[INTcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            INTguess[INTcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                }

                var calulation = new Array();
                var calulationname = new Array();

                var loop=0;
                calulation[loop]=[0,0,0,0];
                calulationname[loop] = " ";
                var stateline= new Array();//可能的条目

//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                for (var i = 0; i <10; i++) {
                    stateline[i]=new Array();
                }

                
for(var j = 0; j <maxtier; j++){
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }


                if(STR==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = 0;
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = 0;
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(DEX==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = 0;
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = 0;
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(INT==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = 0;
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = 0;
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = 0;
                }

                }
                if(LUK==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = 0;
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = 0;
                    stateline[9][j] = 0;
                }

                }
                
                
                
                
                
                switch(remainder){
                case 0:
                    break;
                case 1://取一个
                    for(var j=0;j<10;j++){


                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        whichline(calulation,calulationname,stateline,loop,i,j)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                }
                    break;
                case 2://取两个
                   
                    for(var j=0;j<10;j++){
                    for(var k=j+1;k<10;k++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                    }
                }
            }
                    break;
                case 3:
                     for(var j=0;j<10;j++){

                    for(var k=j+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}
                    }
                }
            }
        }
                    break;
                case 4:
                  

                

                for(var j=0;j<10;j++){
                for(var m=j+1;m<10;m++){
                    for(var k=m+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                for(var iiii=0;iiii<maxtier;iiii++){
                                    if(stateline[m][iiii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        whichline(calulation,calulationname,stateline,loop,iiii,m)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}}
                    }
                }
            }
        }
    }
                    break;
                }

                

                
                
            


            console.log(remainder)
                    console.log(stateline)
    for (var i = calulation.length - 1; i >= 0; i--) {

                        if (STR==calulation[i][0]&&DEX==calulation[i][1] &&INT==calulation[i][2] &&LUK==calulation[i][3]) {
                            console.log(calulationname[i])
                            console.log(calulation[i])
                            output =  output + calulationname[i]+"\n"
                        }
     
    }   





            }else{//普通防具
                if(MOVE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (MOVE == movement[i]) {
                            flamename[term] = (i+1)+"级移动速度火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(JUMP!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (JUMP == jump[i]) {
                        
                            flamename[term] = (i+1)+"级跳跃力火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                
                if(HP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            if (HP == maxHP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级血量火花";
                            term++;
                            break
                        }
                        }

                    
                }
                if(MP!=0){
                    var levelscale;
                    for(var i =0; i<26;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =25;
                            break;
                        }else{
                            if(i*10<=Lleve&&(i+1)*10-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            if (MP == maxMP[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级魔量火花";
                            term++;
                            break
                        }
                        }
                }
                if(ATT!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (ATT == att_armor[i]) {
                            
                            flamename[term] = (i+1)+"级攻击力火花";
                            term++;
                            break
                        }       
                    }
                    
                }

                if(MT!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (MT == mt_armor[i]) {
                            
                            flamename[term] = (i+1)+"级魔力火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(LEVEL!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (LEVEL == level[i]) {
                        
                            flamename[term] = (i+1)+"级等级降低火花";
                            term++;
                            break
                        }       
                    }
                    
                }

                if(DEF!=0){
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                            if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }
                    
                    for(var j = 0; j < 7 ;j++){
                            if (DEF == def[levelscale][j]) {
                            
                            flamename[term] = (j+1)+"级防御力火花";
                            term++;
                            break
                        }
                        }
                    
                }
                if(BOSSDAMAGE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (BOSSDAMAGE == bossdamage[i]) {
                            
                            flamename[term] = (i+1)+"级BOSS伤害火花";
                            term++;
                            break
                        }       
                    }
                }
                if(DAMAGE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (DAMAGE == damage[i]) {
                            
                            flamename[term] = (i+1)+"级伤害火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                if(ALLSTATE!=0){
                    for(var i =0; i<7;i++){//装备等级区间
                        if (ALLSTATE == allstate[i]) {
                            
                            flamename[term] = (i+1)+"级全属性火花";
                            term++;
                            break
                        }       
                    }
                    
                }
                var MAXFLAME = document.getElementById("FNUM");
                maxflame = parseFloat(MAXFLAME.value);
                var remainder = maxflame-term;

                if(remainder==-1){//没有属性

                }else{//开始最难的部分
                        if(1){      
                    STRguess[STRcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            STRguess[STRcounters][j] = onestate[levelscale][j] ;
                        }           

                        STRcounters++;
                        STRguess[STRcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                        
                            STRguess[STRcounters][j] = doublestate[levelscale][j] ;
                        }       


                }

                if(1){
                    DEXguess[DEXcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = onestate[levelscale][j] ;
                        }           

                        DEXcounters++;
                        DEXguess[DEXcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            DEXguess[DEXcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                if(1){
                    LUKguess[LUKcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            LUKguess[LUKcounters][j] = onestate[levelscale][j] ;
                        }           

                        LUKcounters++;
                        LUKguess[LUKcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            LUKguess[LUKcounters][j] = doublestate[levelscale][j] ;
                        }
                }
                if(1){
                    INTguess[INTcounters]=new Array();
                    var levelscale;
                    for(var i =0; i<12;i++){//装备等级区间
                        if(Lleve>230){//如果是辉耀套，直接230+
                            levelscale =11;
                            break;
                        }else{
                            if(i*20<=Lleve&&(i+1)*20-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            INTguess[INTcounters][j] = onestate[levelscale][j] ;
                        }           

                        INTcounters++;
                        INTguess[INTcounters]=new Array();
                        for(var i =0; i<7;i++){//装备等级区间
                        if(Lleve==250){//如果是辉耀套，直接230+
                            levelscale =6;
                            break;
                        }else{
                            if(i*40<=Lleve&&(i+1)*40-1>=Lleve){
                            levelscale = i;
                        }   

                        }
                            
                    }

                        for(var j = 0; j < 7 ;j++){
                            INTguess[INTcounters][j] = doublestate[levelscale][j] ;
                        }
                    
                }

                }

                var calulation = new Array();
                var calulationname = new Array();

                var loop=0;
                calulation[loop]=[0,0,0,0];
                calulationname[loop] = " ";
                var stateline= new Array();//可能的条目

//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                for (var i = 0; i <10; i++) {
                    stateline[i]=new Array();
                }

                for(var j = 0; j <maxtier; j++){
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }


                if(STR==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = 0;
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = 0;
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(DEX==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = 0;
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = 0;
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = 0;
                    stateline[9][j] = INTguess[1][j];
                }

                }
                if(INT==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = 0;
                    stateline[3][j] = LUKguess[0][j];
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = 0;
                    stateline[6][j] = STRguess[1][j];
                    stateline[7][j] = 0;
                    stateline[8][j] = DEXguess[1][j];
                    stateline[9][j] = 0;
                }

                }
                if(LUK==0){//0-力量，1-敏捷，2-智力，3-运气，力量敏捷4，力量智力5，力量运气6，敏捷智力7，敏捷运气8，智力运气9
                    for(var j = 0; j <maxtier; j++){
                    
                    stateline[0][j] = STRguess[0][j];
                    stateline[1][j] = DEXguess[0][j];
                    stateline[2][j] = INTguess[0][j];
                    stateline[3][j] = 0;
                    stateline[4][j] = STRguess[1][j];
                    stateline[5][j] = STRguess[1][j];
                    stateline[6][j] = 0;
                    stateline[7][j] = DEXguess[1][j];
                    stateline[8][j] = 0;
                    stateline[9][j] = 0;
                }

                }

                
                
                
                
                
                switch(remainder){
                case 0:
                    break;
                case 1://取一个
                    for(var j=0;j<10;j++){


                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                            
                
                                        break;
                        }

                        whichline(calulation,calulationname,stateline,loop,i,j)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                }
                    break;
                case 2://取两个
                   
                    for(var j=0;j<10;j++){
                    for(var k=j+1;k<10;k++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }

                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }
                    }
                }
            }
                    break;
                case 3:
                     for(var j=0;j<10;j++){

                    for(var k=j+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                        break;
                        }
                                
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}
                    }
                }
            }
        }
                    break;
                case 4:
                  

                

                for(var j=0;j<10;j++){
                for(var m=j+1;m<10;m++){
                    for(var k=m+1;k<10;k++){
                    for(var l=k+1;l<10;l++){
                    for(var i=0;i<7;i++){
                        if(stateline[j][i]==0){
                           
                                        break;
                        }
                        for(var ii=0;ii<maxtier;ii++){
                            if(stateline[k][ii]==0){
                              
                                        break;
                        }
                            for(var iii=0;iii<maxtier;iii++){
                                if(stateline[l][iii]==0){
                                    
                                        break;
                        }
                                for(var iiii=0;iiii<maxtier;iiii++){
                                    if(stateline[m][iiii]==0){

                                        break;
                        }
                        whichline(calulation,calulationname,stateline,loop,i,j)
                        whichline(calulation,calulationname,stateline,loop,ii,k)
                        whichline(calulation,calulationname,stateline,loop,iii,l)
                        whichline(calulation,calulationname,stateline,loop,iiii,m)
                        loop++;
                        calulation[loop]=[0,0,0,0];
                        calulationname[loop] = " ";
                        console.log(loop)
                    }}}
                    }
                }
            }
        }
    }
                    break;
                }

                

                
                
            


            console.log(remainder)
                    
    for (var i = calulation.length - 1; i >= 0; i--) {

                        if (STR==calulation[i][0]&&DEX==calulation[i][1] &&INT==calulation[i][2] &&LUK==calulation[i][3]) {
                            output =  output + calulationname[i]+"\n"
                            console.log(calulationname[i])
                            console.log(calulation[i])
                        }
     
    }   





            }

        }



        
        txt1.value= "可能的属性组合为:"+"\n"+output+"剩余词条："+ flamename;
        //console.log(flamename)



      }

 </script>





<script type="text/javascript">
 function toPrecision(num, precision) {
      if (precision === undefined) precision = this.numPrecision
      // 这里在做乘法运算时要使用toFixed去四舍五入，防止精度丢失问题，比如1.255*100 !== 125.5
      return parseFloat(Math.round((num * Math.pow(10, precision)).toFixed(precision)) / Math.pow(10, precision))
    }

 </script>

<!--  <script type="text/javascript">
 function addstate(A[][], B[][] ,C) {
      switch(C){
      case "力量":
        break;
        case "敏捷":
        break;
        case "智力":
        break;
        case "运气":
        break;
        case "力量敏捷":
        break;
        case "力量智力":
        break;
        case "力量运气":
        break;
        case "敏捷智力":
        break;
        case "敏捷运气":
        break;
        case "智力运气":
        break;
      }
 </script> -->

<script>
    function whichline(calulation,calulationname,stateline,loop,i,j){
                         

                        if(j==0){
                        calulation[loop][0] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级力量火花";

                        }
                        if(j==1){
                            calulation[loop][1] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级敏捷火花";
                        }
                        if(j==2){
                            calulation[loop][2] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级智力火花";
                        }
                        if(j==3){
                            calulation[loop][3] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级运气火花";
                        }
                        if(j==4){
                            calulation[loop][0] += stateline[j][i];
                            calulation[loop][1] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级力量敏捷火花";
                        }
                        if(j==5){
                            calulation[loop][0] += stateline[j][i];
                            calulation[loop][2] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级力量智力火花";
                        }
                        if(j==6){
                            calulation[loop][0] += stateline[j][i];
                            calulation[loop][3] += stateline[j][i];
                        
                            calulationname[loop] = calulationname[loop] + (i+1) +"级力量运气火花";
                            
                        }
                        if(j==7){
                            calulation[loop][1] += stateline[j][i];
                            calulation[loop][2] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级敏捷智力火花";
                            
                        }
                        if(j==8){
                            calulation[loop][1] += stateline[j][i];
                            calulation[loop][3] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级敏捷运气火花";
                            
                        }
                        if(j==9){
                            calulation[loop][2] += stateline[j][i];
                            calulation[loop][3] += stateline[j][i];
                        
                        calulationname[loop] = calulationname[loop] + (i+1) +"级智力运气火花";
                            
                        }
    }
                        
 function readExcelFile() {
    var type = document.getElementsByName("itemtype");
  if(type[0].checked == true){
       
    }else{
        var Llevel = document.getElementById("LEVEL");
      var Llevel1 = document.getElementById("LEVEL1");
      
      Lleve = parseFloat(Llevel.value)+parseFloat(Llevel1.value);
      var input = document.getElementById('input-score');
      var ishighflame = document.getElementById("ishighflame");//如果为真，则表明现在是高等级评分
      ishighflame = ishighflame.checked;
      if(ishighflame ==true){//判断是否是高级火花评分
        var filename = Lleve + 'high.xlsx';

      }else{
        var filename = Lleve + '.xlsx';
      }
      

      fetch(filename)
        .then(response => response.arrayBuffer())
        .then(buffer => {
          var data = new Uint8Array(buffer);
          var workbook = XLSX.read(data, { type: 'array' });

          var worksheet = workbook.Sheets[workbook.SheetNames[0]];
          var jsonData = XLSX.utils.sheet_to_json(worksheet, { header: 1 });

          
          var row = jsonData[0]; // Assumes only one row in the Excel sheet

          for (var i = 0; i < row.length; i++) {
            score.push(row[i]);
          }

         // console.log(score);
         // console.log(score.length)
    for (var i = score.length - 1; i >= 0; i--) {
        console.log('try')
        if(score[i]<=Score_input&&score[i+1]>=Score_input){
            console.log('find it')
            txt1.value= txt1.value+"\n"+'这个火花已经超过了'+i/100+'%的火花';
            break;
        }
        if(score[score.length-1]<=Score_input){
            console.log('find it')
            txt1.value= txt1.value+"\n"+'这个火花已经毕业了，无敌！';
            break;
        }

    }
        })
        .catch(error => {
          console.log('读取文件出错：', error);
        });
    }
    

    }
      
</script>




  

</a></form></body></html>
